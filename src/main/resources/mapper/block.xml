<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ><mapper namespace="com.yyan.dao.BlockDao">    <!--插入一个区块-->    <insert id="insertBlock" parameterType="com.yyan.pojo.Block">        <!-- mysql插入数据后，获取id -->        insert into block(        id, userId,preHash,fileUrl,timeStamp,category,nonce,hash,height,createTime,updateTime        ) values        (uuid(), #{userId},#{preHash},#{fileUrl},#{timeStamp},#{category},#{nonce},#{hash},#{height}, now(), now())    </insert>    <!--按条件查询区块-->    <!--查询条件-->    <sql id="selectListBlockCondition">        <if test="userId != null">            and userId= #{userId}        </if>        <if test="id != null">            and id=#{id}        </if>    </sql>    <!--查询区块-->    <select id="selectListBlock" resultType="com.yyan.pojo.Block">        SELECT * FROM block        WHERE 1=1        <include refid="selectListBlockCondition"/>        limit ${pageIndex*size},${(pageIndex+1)*size}    </select>    <!--查询数量-->    <select id="countListBlock" resultType="java.lang.Integer">        select count(id) from block WHERE 1=1        <include refid="selectListBlockCondition"/>    </select>    <!--查询最后一个区块-->    <select id="selectEndBlock" resultType="com.yyan.pojo.Block">        SELECT * FROM block        WHERE 1=1        order by timeStamp DESC limit 1    </select></mapper>