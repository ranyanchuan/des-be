<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ><mapper namespace="com.yyan.dao.BlockDao">    <!--插入一个区块-->    <insert id="insertBlock" parameterType="com.yyan.pojo.Block">        <!-- mysql插入数据后，获取id -->        insert into block(        id, userId,preHash,fileUrl,timeStamp,category,nonce,hash,height,createTime,updateTime        ) values        (uuid(), #{userId},#{preHash},#{fileUrl},#{timeStamp},#{category},#{nonce},#{hash},#{height}, now(), now())    </insert>    <!--查询条件-->    <sql id="selectListBlockCondition">        <if test="userId != null">            and userId= #{userId}        </if>        <if test="id != null">            and id=#{id}        </if>        <if test="category != null">            and category=#{category}        </if>        <if test="hash != null">            and hash=#{hash}        </if>    </sql>    <!--查询区块-->    <select id="selectListBlock"  resultType="java.util.HashMap">        SELECT b.*,        u.name as userName        FROM (select * from block where 1=1        <include refid="selectListBlockCondition"/>        limit ${pageIndex*size},${(pageIndex+1)*size}        ) b        LEFT JOIN user u        ON u.id = b.userId        where 1=1        <if test="userName != null">           and u.name LIKE "%${userName}%"        </if>    </select>    <!--查询数量-->    <select id="countListBlock" resultType="java.lang.Integer">        select count(id) from block WHERE 1=1        <include refid="selectListBlockCondition"/>    </select>    <!--查询最后一个区块-->    <select id="selectEndBlock" resultType="com.yyan.pojo.Block">        SELECT * FROM block        WHERE 1=1        order by timeStamp DESC limit 1    </select></mapper>